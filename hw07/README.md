# Домашнее задание №3 «Расчёт подсетей IPv4»

## Цель работы

Цель работы - научиться работать с IPv4 адресами, масками и подсетями.

Для этого будем решать две основные задачи:

1. Определение подсетей по IPv4-адресу.
2. Расчёт подсетей по IPv4-адресу.

## Общие сведения/сценарий

Умение работать с IPv4-подсетями и определять информацию о сетях и узлах на
основе известного IP-адреса и маски подсети необходимо для понимания принципов
работы IPv4-сетей. Цель первой части — закрепить знания о том, как рассчитывать
IP-адрес сети на основе известного IP-адреса и маски подсети. Зная IP-адрес и
маску подсети, мы всегда сможем получить другие данные об этой подсети.

## Необходимые ресурсы

* 1 ПК (Windows с доступом в Интернет)
* Дополнительно: калькулятор IPv4-адресов

## Инструкции

Заполним приведенные ниже таблицы, зная заданный IPv4-адрес, исходную и новую
маски подсетей.

### Упражнение 1

Первый пример решим подробно, расписывая каждый шаг. Исходные данные:

| Дано                       |                 |
| -------------------------- | --------------- |
| **IP-адрес узла**          | 192.168.200.139 |
| **Исходная маска подсети** | 255.255.255.0   |
| **Новая маска подсети**    | 255.255.255.224 |

Необходимо найти:

* количество бит подсети;
* количество созданных подсетей;
* количество бит узлов в подсети;
* количество узлов в подсети;
* сетевой адрес этой подсети;
* IPv4-адрес первого узла в этой подсети;
* IPv4-адрес последнего узла в этой подсети;
* широковещательный IPv4-адрес в этой подсети.

#### Количество бит подсети

Первое, с чего необходимо начать: определить, сколько бит приходится на маску
новой подсети, а сколько - на IP-адреса. Представим целевой IP-адрес узла и
исходную маску подсети в двоичной системе счисления.

```text
   192   |    168   |    200   |    139     - IP-адрес узла
11000000 | 10101000 | 11001000 | 10001011

   255   |    255   |    255   |     0      - Исходная маска подсети
11111111 | 11111111 | 11111111 | 00000000

```

Наложив маску на адрес, можно понять, что под сетевую часть отведены 24 бита
(первые 3 октета), а под адресную - 8 бит (последний октет). Таким образом
сетевой адрес исходной подсети будет: 192.168.200.0

Теперь посмотрим на новую маску подсети и сравним её с исходной:

```text
   255   |    255   |    255   |     0      - Исходная маска подсети
11111111 | 11111111 | 11111111 | 00000000

   255   |    255   |    255   |    224     - Новая маска подсети
11111111 | 11111111 | 11111111 | 11100000

```

Разница составляет 3 бита, следовательно под новые подсети будет отведено 3 бита.

#### Количество созданных подсетей

Для определения количества подсетей, воспользуемся формулой:

$$N_{net} = 2^k,$$

где $N_{net}$ - количество созданных подсетей;

$k$ - количество бит, выделенных под создание подсетей.

Подставив значение бит в формулу получим: $N_{net} = 2^3 = 8$.

С заданной новой сетевой маской мы сможем создать 8 подсетей.

#### Количество бит узлов в подсети

В исходной подсети под адресную часть был выделен последний октет: 8 бит. 3 бита
мы забрали под создание подсетей, следовательно в новых подсетях на адресную часть будет приходиться $8 - 3 = 5$ битов.

#### Количество узлов в подсети

Количество узлов в новых подсетях вычислим по формуле:

$$N_{hosts} = 2^n - 2,$$

где $N_{hosts}$ - количество IP-адресов, доступных для назначения узлам в новых
подсетях;

$n$ - количество бит, выделенных на адресную часть в новых подсетях.

Помимо узлов, подсети потребуют один адрес на саму сеть и один - для
широковещательной рассылки, поэтому мы вычитаем двойку из $2^n$.

Подставим значение бит адресной части и получим количество узлов в новых
подсетях: $N_{hosts} = 2^5 - 2 = 32 - 2 = 30$.

#### Сетевой адрес в новой подсети

Сетевой адрес можно получить битовым сложением (логическое "И") IP-адреса и
маски подсети. Проделаем эту операцию заменив маску исходной сети на новую:

```text
   192   |    168   |    200   |    139     - IP-адрес узла
11000000 | 10101000 | 11001000 | 10001011

   255   |    255   |    255   |    224     - Новая маска подсети
11111111 | 11111111 | 11111111 | 11100000

   192   |    168   |    200   |    128     - Сетевой адрес в новой подсети
11000000 | 10101000 | 11001000 | 10000000

```

Сетевой адрес новой подсети для IP-адреса 192.168.200.139/27 - 192.168.200.128.

#### IPv4-адрес первого узла

IP-адрес первого узла можно получить увеличив на единицу сетевой адрес:
192.168.200.129.

Аналогично, можно установить первый справа (младший) бит в адресной части
сетевого адреса подсети.

```text
   192   |    168   |    200   |    128     - Сетевой адрес в новой подсети
11000000 | 10101000 | 11001000 | 10000000

   192   |    168   |    200   |    129     - IPv4-адрес первого узла
11000000 | 10101000 | 11001000 | 10000001
```

#### IPv4-адрес последнего узла

Определим IP-адрес последнего узла в новой подсети, сложив сетевой адрес
(адресную часть) и количество узлов в сети: $128 + 30 = 158$. Либо, что то же
самое: установив все биты адресной части новой подсети, кроме последнего.

```text
   192   |    168   |    200   |    128     - Сетевой адрес в новой подсети
11000000 | 10101000 | 11001000 | 10000000

   192   |    168   |    200   |    158     - IPv4-адрес последнего узла
11000000 | 10101000 | 11001000 | 10011110
```

#### Широковещательный IPv4-адрес

У широковещательного IP-адреса все биты в адресной части установлены в единицу
(при неизменной сетевой):

```text
   192   |    168   |    200   |    128     - Сетевой адрес в новой подсети
11000000 | 10101000 | 11001000 | 10000000

   192   |    168   |    200   |    159     - Широковещательный IPv4-адрес
11000000 | 10101000 | 11001000 | 10011111
```

#### Решение задачи

| Дано:                      |                 |
| -------------------------- | --------------- |
| **IP-адрес узла**          | 192.168.200.139 |
| **Исходная маска подсети** | 255.255.255.0   |
| **Новая маска подсети**    | 255.255.255.224 |

| Найти:                                          |                 |
| ----------------------------------------------- | :-------------: |
| **Количество бит подсети**                      | 3               |
| **Количество созданных подсетей**               | 8               |
| **Количество бит узлов в подсети**              | 5               |
| **Количество узлов в подсети**                  | 30              |
| **Сетевой адрес этой подсети**                  | 192.168.200.128 |
| **IPv4-адрес первого узла в этой подсети**      | 192.168.200.129 |
| **IPv4-адрес последнего узла в этой подсети**   | 192.168.200.158 |
| **Широковещательный IPv4-адрес в этой подсети** | 192.168.200.159 |

### Упражнение 2

Так как алгоритм решения мы уже подробно расписали, для этого и последующих
упражнений приведём только исходные данные и ответы.

| Дано:                      |               |
| -------------------------- | ------------- |
| **IP-адрес узла**          | 10.101.99.228 |
| **Исходная маска подсети** | 255.0.0.0     |
| **Новая маска подсети**    | 255.255.128.0 |

| Найти:                                          |                |
| ----------------------------------------------- | :------------: |
| **Количество бит подсети**                      |       9        |
| **Количество созданных подсетей**               |      512       |
| **Количество бит узлов в подсети**              |       15       |
| **Количество узлов в подсети**                  |     32766      |
| **Сетевой адрес этой подсети**                  |   10.101.0.0   |
| **IPv4-адрес первого узла в этой подсети**      |   10.101.0.1   |
| **IPv4-адрес последнего узла в этой подсети**   | 10.101.127.254 |
| **Широковещательный IPv4-адрес в этой подсети** | 10.101.127.255 |

### Упражнение 3

| Дано:                      |               |
| -------------------------- | ------------- |
| **IP-адрес узла**          | 172.22.32.12  |
| **Исходная маска подсети** | 255.255.0.0   |
| **Новая маска подсети**    | 255.255.224.0 |

| Найти:                                          |               |
| ----------------------------------------------- | :-----------: |
| **Количество бит подсети**                      |       3       |
| **Количество созданных подсетей**               |       8       |
| **Количество бит узлов в подсети**              |      13       |
| **Количество узлов в подсети**                  |     8190      |
| **Сетевой адрес этой подсети**                  |  172.22.32.0  |
| **IPv4-адрес первого узла в этой подсети**      |  172.22.32.1  |
| **IPv4-адрес последнего узла в этой подсети**   | 172.22.63.254 |
| **Широковещательный IPv4-адрес в этой подсети** | 172.22.63.255 |

### Упражнение 4

| Дано:                      |                 |
| -------------------------- | --------------- |
| **IP-адрес узла**          | 192.168.1.245   |
| **Исходная маска подсети** | 255.255.255.0   |
| **Новая маска подсети**    | 255.255.255.252 |

| Найти:                                          |               |
| ----------------------------------------------- | :-----------: |
| **Количество бит подсети**                      |       6       |
| **Количество созданных подсетей**               |      64       |
| **Количество бит узлов в подсети**              |       2       |
| **Количество узлов в подсети**                  |      20       |
| **Сетевой адрес этой подсети**                  | 192.168.1.244 |
| **IPv4-адрес первого узла в этой подсети**      | 192.168.1.245 |
| **IPv4-адрес последнего узла в этой подсети**   | 192.168.1.246 |
| **Широковещательный IPv4-адрес в этой подсети** | 192.168.1.247 |

### Упражнение 5

| Дано:                      |               |
| -------------------------- | ------------- |
| **IP-адрес узла**          | 128.107.0.55  |
| **Исходная маска подсети** | 255.255.0.0   |
| **Новая маска подсети**    | 255.255.255.0 |

| Найти:                                          |               |
| ----------------------------------------------- | :-----------: |
| **Количество бит подсети**                      |       8       |
| **Количество созданных подсетей**               |      256      |
| **Количество бит узлов в подсети**              |       8       |
| **Количество узлов в подсети**                  |      254      |
| **Сетевой адрес этой подсети**                  |  128.107.0.0  |
| **IPv4-адрес первого узла в этой подсети**      |  128.107.0.1  |
| **IPv4-адрес последнего узла в этой подсети**   | 128.107.0.254 |
| **Широковещательный IPv4-адрес в этой подсети** | 128.107.0.255 |

### Упражнение 6

| Дано:                      |                 |
| -------------------------- | --------------- |
| **IP-адрес узла**          | 192.135.250.180 |
| **Исходная маска подсети** | 255.255.255.0   |
| **Новая маска подсети**    | 255.255.255.248 |

| Найти:                                          |                 |
| ----------------------------------------------- | :-------------: |
| **Количество бит подсети**                      |        5        |
| **Количество созданных подсетей**               |       32        |
| **Количество бит узлов в подсети**              |        3        |
| **Количество узлов в подсети**                  |        6        |
| **Сетевой адрес этой подсети**                  | 192.135.250.176 |
| **IPv4-адрес первого узла в этой подсети**      | 192.135.250.177 |
| **IPv4-адрес последнего узла в этой подсети**   | 192.135.250.182 |
| **Широковещательный IPv4-адрес в этой подсети** | 192.135.250.183 |
